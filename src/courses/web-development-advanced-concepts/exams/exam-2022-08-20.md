---
sidebar: auto
---
# Exam 2022-08-20
Here you find sample answers and marking guidelines to the questions on the exam 2022-08-20.

---

Start by reading through all questions.

Max score is 30 points.

* For grade 3, 40% of max score (12 points) is required
* For grade 4, 60% of max score (18 points) is required
* For grade 5, 80% of max score (24 points) is required

You are not allowed to use anything but:

* The computer you sit at to only answer the questions on this exam
* A dictionary to translate to/from English from/to your native language
* Pen and paper to sketch with (should not be submitted)

Write your answers in either English or Swedish. If you write your answers in Swedish, make sure to not introduce any translation confusement. **Write proper sentences (spelling, upper/lower case characters, punctuation, etc.).** Each answer that contains multiple obvious errors, such as:

* A sentence starting with a lower case character
* A sentence not ending with a period, question mark, or any other suitable character
* A sentence that is incomplete
* A sentence that is incomprehensible

Will automatically lose 0.25 points. The ability to express yourself in text clearly is very important for an engineer, and therefor part of the examination.

Answers that are more or less copies of sample answers given to you or copies of text found somewhere else will be rewarded 0 points. Use your own words to answer the questions.

Good luck!

## Client-side

### Question 1 (1p)
<ExamQuestion>
<template v-slot:question>

An SPA can be implemented without updating the URI in the web browser when the user change what main content should be shown in the SPA. However, it's usually stupid to not update the URI to reflect it. Explain why. 

</template>
<template v-slot:sample-answer>

The web is built on the principle that URIs should identify different pages (the content on different pages). If not used correctly, bookmarking a page won't work, sending a link to a friend won't work, search engines won't be able to properly index your website and send the user directly to the right webpage on your website, etc. 

</template>
<template v-slot:marking-guidelines>

* 1 point for a valid explanation
* -0.25 points for saying something weird/wrong

</template>
</ExamQuestion>




### Question 2 (1p)
<ExamQuestion>
<template v-slot:question>

In JavaScript, explain the difference between:

```js
aFunction(anotherFunction)
```

and:

```js
aFunction(anotherFunction())
```

</template>
<template v-slot:sample-answer>

`aFunction(x)` will call the function stored in the variable `aFunction` and pass it the value stored in the `x` variable.

`aFunction(x())` will first call the function stored in the `x` variable, and the return value from that function will be passed to the function stored in the variable `aFunction`.

</template>
<template v-slot:marking-guidelines>

* 0.5 points for respective correct explanation how of they work

OR

* 1 point for explaining how they differ

</template>
</ExamQuestion>




### Question 3 (1p)
<ExamQuestion>
<template v-slot:question>

Name 3 different client-side JS events that can fire on a webpage.

</template>
<template v-slot:sample-answer>

* `click`
* `submit`
* `DOMContentLoaded`

</template>
<template v-slot:marking-guidelines>

* 0.33 points for each correct name
* -0.1 points for spelling upper/lower case character wrong
* -0.33 points for naming the event with `on` in the beginning

</template>
</ExamQuestion>




### Question 4 (2p)
<ExamQuestion>
<template v-slot:question>

Is the code below good or bad? Justify your answer.

```js
function showAccountsPage(){
    
    const pageDiv = document.querySelector('#accounts-page')
    pageDiv.innerHTML = ""
    
    const header = document.createElement('h1')
    header.innerHTML = "Accounts"
    pageDiv.appendChild(header)
    
    const loadingP = document.createElement('p')
    loadingP.innerHTML = "Loading..."
    pageDiv.appendChild(loadingP)
    
    fetch("/api/accounts").then(function(response){
        
        return response.json()
        
    }).then(function(accounts){
        
        pageDiv.removeChild(loadingP)
        
        const ul = document.createElement('ul')
        
        for(const account of accounts){
            
            const li = document.createElement('li')
            ul.appendChild(li)
            
            const a = document.createElement('a')
            a.href = "/accounts/"+account.id
            a.innerHTML = account.username
            li.appendChild(a)
            
        }
        
        pageDiv.appendChild(ul)
        
    }).catch(function(error){
        
        pageDiv.removeChild(loadingP)
        
        const p = document.createElement('p')
        p.innerHTML = "Failed to load accounts"
        pageDiv.appendChild(p)
        
    })
    
}
```

</template>
<template v-slot:sample-answer>

`a.innerHTML = account.username` introduces a XSS vulnerability, so no, the code is not good.

</template>
<template v-slot:marking-guidelines>

* 2 points for correct answer and valid justification
* -0.25 points for writing something weird/incorrect

</template>
</ExamQuestion>










## Containers

### Question 5 (1p)
<ExamQuestion>
<template v-slot:question>

Explain what a docker container and a docker image is.

</template>
<template v-slot:sample-answer>

A Docker image contains a description of everything needed to run an app, such as the source code for the app, instructions on how to build the app, the libraries the app needs, how to start the app, etc.

A Docker container is a thing that can use the description in a Docker image to build, start and run the app in an isolated environment (meaning that apps running in different containers don't interfere with each other when they run in parallel on the same computer). 

</template>
<template v-slot:marking-guidelines>

* 0.5 points for docker image explanation
* 0.5 points for docker container explanation

</template>
</ExamQuestion>



## Scaling

### Question 6 (2p)
<ExamQuestion>
<template v-slot:question>

Explain in which context you use a load balancer. And when using a load balancer with a website, describe the problems that comes with it (at least two different problems), and describe one solution of your choice to each problem.

</template>
<template v-slot:sample-answer>

A load balancer needs to be used when you use horizontal scaling to scale an application (i.e. running the application on multiple different computers/servers at the same time). Instead of the application directly receiving the work that should be done (for example HTTP requests), the work is sent to the load balancer, and the load balancer then distributes the work among the computers running the app, so each of them get a small amount of the work, which they then carry out.

The first problem to solve is to figure out which application instance the load balancer should forward the HTTP request to. If the web application is stateless, then the load balancer can simply use a round-robin algorithm to distribute the HTTP requests.

The second problem to solve is how to deal with the state in the web application. If the web application is stateful (stores information locally), such as remembering which account a specific client has logged in to, then all HTTP requests from that one and the same client must come to one and the same application instance. This can be done by creating a cookie identifying which application instance the user's requests always should be forwarded too (solution known as sticky session) when the user's session is created. However, then it will be harder to scale down the application, since one and the same application instance must be up and running as long as it has an active user session, so if one and the same user never logs out and remains active, the application instance that user is using can't be taken down.

Instead of storing the state in the application, it's often better to make the application stateless, and store the state outside the application, for example in a database running on another server. Then all application instances have access to the same state through that database. This way we don't need to worry about the application state while scaling at all, and the load balancer can freely choose how to forward the HTTP requests, and when to take down one application instance.

</template>
<template v-slot:marking-guidelines>

* 0.5 points for when to use a load balancer (the context)
* 0.25 points for each problem
* 0.5 points for each solution to a problem

</template>
</ExamQuestion>



## Server-side

### Question 7 (3p)
<ExamQuestion>
<template v-slot:question>

Explain what a three-layered architecture is, which parts it consists of and what each part is used for. Then also explain how web applications use a three-layered architecture.

Don't write any code.

</template>
<template v-slot:sample-answer>

A three-layered architecture is a way organize the code of an application in three different layers, each with their own responsibilities:

* The *Data Access Layer* contains the code for storing and retrieving the application's data. It usually provides CRUD (Create, Read, Update and Delete) operations for this
* The *Business Logic Layer* contains the code for carrying out the tasks the user wants to do (i.e. the application's functionality), such as computing how much the user should pay for the products put in a shopping bag, verify payments, etc. It typically contains authorization checks (for example, only allowing the user to use the application if the user has a paid membership or if the test period is not over yet) and validation checks (for example, checking if the data the user sends to the application is in correct format). Is uses the Data Access Layer when needed
* The *Presentation Layer* is responsible for implementing an interface through which the application can be used, for example a graphical user interface that humans can use. When the user interacts with the application through the interface, for example clicks on a button, the Presentation Layer asks the Business Logic Layer to execute the task that is associated with the button

In web applications, the Presentation Layer is responsible for receiving HTTP requests, and then ask the Business Logic Layer to carry out the requests. The Data Access Layer often store the data in a database. The Presentation Layer is also responsible for generating the HTTP response to send back, containing the HTML and CSS code the web browser use to display the webpage in the response to the user.

</template>
<template v-slot:marking-guidelines>

* 0.25 points for what it is
* 0.5 points for what each part is used for
* 0.25 points for how web app use it (HTTP, HTML, CSS in Presentation Layer, and description of the other layers)
* 1 point for good quality answers (many details, not using different names to describe the same thing, using the correct name on things, write proper and easy to read sentences, clearly explain which layer making use of which other layer, use singular and plural correctly, etc. **AND that aren't extremely similar to the sample answer I have given you (the instructions (at the beginning of the exam) says that such answers should be rewarded 0 points, but I have instead been kind and only reduced it by 1 point)**)

</template>
</ExamQuestion>




### Question 8 (1p)
<ExamQuestion>
<template v-slot:question>

On a web application implemented with a three-layered architecture, explain why the code related to sessions are only found in the Presentation Layer, and never in the other two layers.

</template>
<template v-slot:sample-answer>

It is only the Presentation Layer that knows the app is a web application, and therefor the only layer that knows that sessions are needed and used. The other two layers do not know that the app is a web application, and they should therefore not count nor be dependent on that sessions are used.

</template>
<template v-slot:marking-guidelines>

* 1 point for correct answer (a valid justification)
* 0.5 points for saying something that is relevant to the right answer

</template>
</ExamQuestion>




### Question 9 (1p)
<ExamQuestion>
<template v-slot:question>

In a three layered architecture, give an example of an implementation detail that should not be exposed to the next layer in the Data Access Layer. Justify your answer.

</template>
<template v-slot:sample-answer>

An example of an implementation detail the Data Access Layer shouldn't expose is what type of database it stores the data in. That would be exposed if it for example sends back an error that comes from the database, for example a specific MySQL error (if we would use a MySQL database). If we send back that, the code in the other layers might be dependent on this specific error (for example they check if they receive this specific error), and then we can't change to another database in the future (for example a PostgreSQL database) by only changing the code in the Data Access Layer.

</template>
<template v-slot:marking-guidelines>

* 0.5 points for valid example
* 0.5 points for valid justification

</template>
</ExamQuestion>




### Question 10 (1p)
<ExamQuestion>
<template v-slot:question>

In a web application built with a three-layered architecture, in which layer would you find the code protecting the website against XSS attacks? Justify your answer.

</template>
<template v-slot:sample-answer>

It is only the Presentation Layer that is responsible for implementing the GUI-part of the application, and since XSS vulnerabilities exists in the GUI for websites (the HTML code), it is only in the Presentation Layer we need to write code protecting the website from XSS attacks (the other two layers do not know the GUI is implemented in HTML).

</template>
<template v-slot:marking-guidelines>

* 1 point for correct answer and valid justification

</template>
</ExamQuestion>




## REST API

### Question 11 (1p)
<ExamQuestion>
<template v-slot:question>

Match each HTTP status code with its reason phrase.

Status codes: `200` `201` `204` `404` `500`

Reason Phrases: `No Content` `OK` `Created` `Not Found` `Internal Server Error`

All needs to be matched correct to get any points.

</template>
<template v-slot:sample-answer>

* `200`: `OK`
* `201`: `Created`
* `204`: `No Content`
* `404`: `Not Found`
* `500`: `Internal Server Error`

</template>
<template v-slot:marking-guidelines>

* 1 point for all correct

</template>
</ExamQuestion>




### Question 12 (1p)
<ExamQuestion>
<template v-slot:question>

In a REST API, to create a new account one should send an HTTP request looking like this (`XXX` should be replaced with what is suitable):

```http
POST /create-account HTTP/1.1
Host: www.the-website.com
Content-Type: application/json
Content-Length: XXX

{"username": "XXX", "password": "XXX"}
```

Is this part of the REST API good designed? Justify your answer.

</template>
<template v-slot:sample-answer>

No, it is badly designed, because the URI does not identify a resource/collection of resources, but instead describes an action. The URI should rather be `/accounts` (the method `POST` means the request is about creating a resource).

</template>
<template v-slot:marking-guidelines>

* 1 point for correct answer and valid justification
* -0.25 points for saying something weird/incorrect

</template>
</ExamQuestion>




### Question 13 (3p)
<ExamQuestion>
<template v-slot:question>

There exists 3 different types/categories of claims one can use in a JWT. Name and describe how they work/differ.

</template>
<template v-slot:sample-answer>

* `Registered claims`: Officially pre-defined claims that should have the same meaning no matter where they are used
* `Public claims`: Claims you invent yourself, but the names may not collide with names other use (e.g. use URI:s as names with a domain name you own)
* `Private claims`: Claims you invent yourself that may collide with claims others have invented (name them however you want)

</template>
<template v-slot:marking-guidelines>

* 0.25 points for each correct name
* 0.75 points for each correct description

</template>
</ExamQuestion>




### Question 14 (1p)
<ExamQuestion>
<template v-slot:question>

Does an ID Token have to be a JWT? Justify your answer.

</template>
<template v-slot:sample-answer>

Yes, the OpenID Connect specification specifies it has to be a JWT.

</template>
<template v-slot:marking-guidelines>

* 1 point for correct answer and valid justification

</template>
</ExamQuestion>



## Security





### Question 15 (1p)
<ExamQuestion>
<template v-slot:question>

If a REST API uses JWT, does it also need to use HTTPS instead of HTTP? Or is it equally secure anyway? Justify your answer.

</template>
<template v-slot:sample-answer>

JWT and HTTPS are for different purposes (JWT for authentication/authorization, HTTPS for secure (encrypted) communication), so one of them can't be used instead of the other; HTTPS must be used even when JWTs are used. Otherwise hackers using the same network as the user can read the data the user sends and receives.

</template>
<template v-slot:marking-guidelines>

* 1 point for correct answer and valid justification

</template>
</ExamQuestion>






### Question 16 (1p)
<ExamQuestion>
<template v-slot:question>

Give an example of a client-side JS cross-site HTTP request the web browser would send to a server even if the server doesn't support CORS.

</template>
<template v-slot:sample-answer>

A simple HTTP `GET` request you haven't set any HTTP header on yourself.

</template>
<template v-slot:marking-guidelines>

* 1 point for a correct example
* -0.2 points for just saying `GET` or `POST` without any info about headers
* -0.3 points for saying something that is wrong/ununderstandable

</template>
</ExamQuestion>




### Question 17 (2p)
<ExamQuestion>
<template v-slot:question>

Name (as good as you can) and describe how 2 different HTTP headers that is part of CORS works. Also show sample values they can have, and explain how those values work/should be interpreted.

</template>
<template v-slot:sample-answer>

The HTTP header `Access-Control-Allow-Origin` tells the web browser which server the client-side JavaScript code may come from to be allowed to send HTTP request to the server. For example, the value `https://my-website.com` means that only client-side JavaScript code coming from `https://my-website.com` may send HTTP requests to the server.

The HTTP header `Access-Control-Allow-Methods` tells the web browser which methods the client-side JavaScript code may use in the HTTP requests it sends to the server. For example, the value `DELETE` means that the client-side JavaScript code may only send `DELETE` requests to the server.

</template>
<template v-slot:marking-guidelines>

* 0.25 points for each name
* 0.25 points for each description
* 0.25 points for each sample value
* 0.25 points for each explanation of sample value

</template>
</ExamQuestion>




## Code Writing




### Question 18 (1p)
<ExamQuestion>
<template v-slot:question>

To represent a human in JavaScript, one can use an object like:

```js
const human = {
    id: 1,
    name: "Alice",
    age: 10 // In years
}
```

Implement the JavaScript function `getAdultNames(humans)` which receives an array with human objects and returns a new array containing the name of the humans who are at least `18` years old.  The order of the names does not matter.

</template>
<template v-slot:sample-answer>

```js
const MIN_ADULT_AGE = 18

function getAdultNames(humans){
    
    const adultNames = []
    
    for(const human of humans){
        if(MIN_ADULT_AGE <= human.age){
            adultNames.push(human.name)
        }
    }
    
    return adultNames
    
}
```

</template>
<template v-slot:marking-guidelines>

* 1 point for a solution that largely works
* -0.1 points for using `let` when `const` should be used
* -0.1 points for using `var` instead of `let`/`const`
* -0.25 points for returning `-1` in some cases
* -0.3 points for creating an array with human objects

</template>
</ExamQuestion>




### Question 19 (1p)
<ExamQuestion>
<template v-slot:question>

Implement the client-side JavaScript function `addToSummarizer(number)` which should return the sum of all numbers it has been called with.

Sample usage:

```js
addToSummarizer(5) // --> 5
addToSummarizer(3) // --> 8
addToSummarizer(5) // --> 13
```

</template>
<template v-slot:sample-answer>

```js
let sum = 0

function addToSummarizer(number){
    sum += number
    return sum
}
```

Or without polluting the top-level scope with the `sum` variable by using a self-executing function to introduce a new scope (not necessary for full score):

```js
const addToSummarizer = (function(){
    
    let sum = 0
    
    return function(number){
        sum += number
        return sum
    }
    
})()
```

</template>
<template v-slot:marking-guidelines>

* 1 point for a function that works

</template>
</ExamQuestion>




### Question 20 (4p)
<ExamQuestion>
<template v-slot:question>

The function `getCategories()` can be used to fetch categories from the server like this:

```js
getCategories(function(error, categories){
    if(error){
        // Couldn't fetch the categories.
    }else{
        // Do something with the categories.
        // categories = [
        //   {id: 1, name: "Comedy"},
        //   {id: 2, name: "Drama"},
        //   ...
        // ]
    }
})
```

The function `getMoviesByCategoryId()` can be used to fetch movies from the server that belongs to a specific category, like this:

```js
getMoviesByCategoryId(1, function(error, movies){
    if(error){
        // Couldn't fetch the movies.
    }else{
        // Do something with the movies.
        // movies = [
        //   {id: 4, categoryId: 1, title: "Dumb and Dumber"},
        //   {id: 7, categoryId: 1, title: "Ace Ventura: Pet Detective"},
        //   ...
        // ]
    }
})
```

Implement the function `getCategoriesWithMovies(callback)` which should fetch all categories, and for each category fetch all movies, and pass them all to the `callback` function like this:

```js
getCategoriesWithMovies(function(error, categories){
    if(error){
        // Couldn't fetch the categories or the movies.
    }else{
        // Do something with the categories and movies.
        // categories = [
        //   {
        //     id: 1,
        //     name: "Comedy",
        //     movies: [
        //       {id: 4, categoryId: 1, title: "Dumb and Dumber"},
        //       {id: 7, categoryId: 1, title: "Ace Ventura: Pet Detective"},
        //       ... (more movies...)
        //     ]
        //   },
        //   ... (more categories with movies)
        // ]
    }
})
```

Important details:

* The callback function should be called only once
* As soon as any function gives an error, the callback function should be called with that error (the other argument should be `null`)
* If all data is successfully fetched, the callback function should be called with `null` as the error, and the categories array (with the movies) as the second argument
* The order of the categories and the movies is not important

Implement two different versions of the function:

* One version that fetches data in sequential order (one at a time)
* One version that fetches data in parallel (as fast as possible)

</template>
<template v-slot:sample-answer>

```js
// Sequential
function getCategoriesWithMovies(callback){
    
    getCategories(function(categoriesError, categories){
        
        if(categoriesError){
            callback(categoriesError, null)
            return
        }
        
        let categoryIndex = 0
        
        fetchNextCategoryMovies()
        
        function fetchNextCategoryMovies(){
            
            if(categoryIndex == categories.length){
                callback(null, categories)
                return
            }
            
            const category = categories[categoryIndex]
            
            getMoviesByCategoryId(category.id, function(moviesError, movies){
                
                if(moviesError){
                    callback(moviesError, null)
                    return
                }
                
                category.movies = movies
                categoryIndex += 1
                
                fetchNextCategoryMovies()
                
            })
            
        }
        
    })
    
}
```

```js
// Parallel
function getCategoriesWithMovies(callback){
    
    getCategories(function(categoriesError, categories){
        
        if(categoriesError){
            callback(categoriesError, null)
            return
        }
        
        let hasSentBackError = false
        let gotMoviesCounter = 0
        
        for(const category of categories){
            
            getMoviesByCategoryId(category.id, function(moviesError, movies){
                
                if(moviesError && !hasSentBackError){
                    hasSentBackError = true
                    callback(moviesError, null)
                    return
                }
                
                category.movies = movies
                
                gotMoviesCounter += 1
                
                if(gotMoviesCounter == categories.length){
                    callback(null, categories)
                }
                
            })
            
        }
        
    })
    
}
```

</template>
<template v-slot:marking-guidelines>

* 2 points for the sequential function
* 2 points for the parallel function
* 0 points for a function that assumes callback function runs synchronously (called immediately)
* For respective solution:
    * -0.5 points for not handling errors at all
    * -0.2 for each bad name
    * -0.2 for not using `let`/`const` correct

</template>
</ExamQuestion>