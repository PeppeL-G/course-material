<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.62">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>Asynchronous Programming in JavaScript | Course Material</title><meta name="description" content="">
    <link rel="preload" href="/course-material/assets/style-56ba09d5.css" as="style"><link rel="stylesheet" href="/course-material/assets/style-56ba09d5.css">
    <link rel="modulepreload" href="/course-material/assets/app-8331cbf7.js"><link rel="modulepreload" href="/course-material/assets/index.html-1cd9357e.js"><link rel="modulepreload" href="/course-material/assets/index.html-ef4b17ef.js"><link rel="prefetch" href="/course-material/assets/index.html-19adc507.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-7a97b9b5.js" as="script"><link rel="prefetch" href="/course-material/assets/course-syllabus.html-0c1cadf6.js" as="script"><link rel="prefetch" href="/course-material/assets/laboratory-work.html-8115a5c8.js" as="script"><link rel="prefetch" href="/course-material/assets/lectures.html-4c6816ae.js" as="script"><link rel="prefetch" href="/course-material/assets/project-grading-guidelines.html-1ff78ba0.js" as="script"><link rel="prefetch" href="/course-material/assets/project-work.html-fc4cc368.js" as="script"><link rel="prefetch" href="/course-material/assets/study-guide.html-1664da08.js" as="script"><link rel="prefetch" href="/course-material/assets/time-plan.html-5e17fbfe.js" as="script"><link rel="prefetch" href="/course-material/assets/tutorials.html-b332125a.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-2004b728.js" as="script"><link rel="prefetch" href="/course-material/assets/course-syllabus.html-5ea52803.js" as="script"><link rel="prefetch" href="/course-material/assets/laboratory-work.html-1bbd41a6.js" as="script"><link rel="prefetch" href="/course-material/assets/lectures.html-99f99b30.js" as="script"><link rel="prefetch" href="/course-material/assets/project-grading-guidelines.html-18074902.js" as="script"><link rel="prefetch" href="/course-material/assets/project-work.html-db4c1b81.js" as="script"><link rel="prefetch" href="/course-material/assets/study-guide.html-4a9900f8.js" as="script"><link rel="prefetch" href="/course-material/assets/time-plan.html-1544f19f.js" as="script"><link rel="prefetch" href="/course-material/assets/tutorials.html-59656809.js" as="script"><link rel="prefetch" href="/course-material/assets/written-examination.html-ffbd7500.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-5371f891.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-534ae524.js" as="script"><link rel="prefetch" href="/course-material/assets/course-syllabus.html-1ce819f5.js" as="script"><link rel="prefetch" href="/course-material/assets/exercises.html-3f1d65c8.js" as="script"><link rel="prefetch" href="/course-material/assets/laboratory-work.html-3bc45b1b.js" as="script"><link rel="prefetch" href="/course-material/assets/lectures.html-2ff08a5c.js" as="script"><link rel="prefetch" href="/course-material/assets/repetition-exercises.html-eb095b0d.js" as="script"><link rel="prefetch" href="/course-material/assets/study-guide.html-0f1153ba.js" as="script"><link rel="prefetch" href="/course-material/assets/time-plan.html-8d4b838e.js" as="script"><link rel="prefetch" href="/course-material/assets/written-examination.html-f4d311f8.js" as="script"><link rel="prefetch" href="/course-material/assets/lab-1-example.html-10d1cef6.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-a483d577.js" as="script"><link rel="prefetch" href="/course-material/assets/course-syllabus.html-54197780.js" as="script"><link rel="prefetch" href="/course-material/assets/laboratory-work.html-fe8e7b03.js" as="script"><link rel="prefetch" href="/course-material/assets/lectures.html-0d3287d0.js" as="script"><link rel="prefetch" href="/course-material/assets/project-grading-guidelines.html-8052bd5c.js" as="script"><link rel="prefetch" href="/course-material/assets/project-work.html-2fd43ddc.js" as="script"><link rel="prefetch" href="/course-material/assets/study-guide.html-12090332.js" as="script"><link rel="prefetch" href="/course-material/assets/time-plan.html-8d0e140a.js" as="script"><link rel="prefetch" href="/course-material/assets/tutorials.html-a03fc0c4.js" as="script"><link rel="prefetch" href="/course-material/assets/written-examination.html-8f83b882.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-47e8770c.js" as="script"><link rel="prefetch" href="/course-material/assets/course-syllabus.html-a7935565.js" as="script"><link rel="prefetch" href="/course-material/assets/exercises.html-9a007cfe.js" as="script"><link rel="prefetch" href="/course-material/assets/feedback.html-831d9e72.js" as="script"><link rel="prefetch" href="/course-material/assets/lectures.html-807aa8b1.js" as="script"><link rel="prefetch" href="/course-material/assets/project-grading-guidelines.html-2f81f782.js" as="script"><link rel="prefetch" href="/course-material/assets/project-work.html-bc1446fd.js" as="script"><link rel="prefetch" href="/course-material/assets/study-guide.html-1d337163.js" as="script"><link rel="prefetch" href="/course-material/assets/time-plan.html-678cb7a8.js" as="script"><link rel="prefetch" href="/course-material/assets/tutorials.html-a642e012.js" as="script"><link rel="prefetch" href="/course-material/assets/written-examination.html-7f551b3e.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-b8a588bf.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-9b794497.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-9a187034.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-43bfb803.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-715e41e5.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-d42c1190.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-934ceb96.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-21ae8cff.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-76e42e83.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-8de4a90d.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-2d286862.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-1d85135b.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-54993a67.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-ab66b5df.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-bd8636dc.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-be15b131.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-30a81a1b.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-2848ade9.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-36aedbc6.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-7cf30290.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-3c9ce051.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-b6b92b57.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-772883bc.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-ac8ad9a8.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-81e215ee.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-63063043.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-25169755.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-a01334b2.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-004ce907.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-4302414a.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-38b99bfc.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-32eef2d3.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-10862981.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-1784cc38.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-76b475bf.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-dd731c17.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-0ca8171f.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-8d829e25.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-405c6a45.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-3013c932.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-15ef79ed.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-52da24e1.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-8118ab85.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-05d45391.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-ff7a44bf.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-caa93790.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-030c9e37.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-77aba4ee.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-3a135578.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-b5129750.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-45be0572.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-76cd083b.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-7b403fd7.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-dd9bf580.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-a80f9e90.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-635ac89a.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-4e85bd32.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-71f366f6.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-2a9974dc.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-c430b064.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-17b23534.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-d9166e32.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-1dbeadc9.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-5a36733e.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-3c8498fe.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-2266a17b.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-3c1eb23d.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-6813f072.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-46db9622.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-316b4635.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-76d1b729.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-4d9980e2.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-986ca623.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-aaac2d4e.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-b772aca9.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-dae529d8.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-036c58ed.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-4d2de7a6.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-ab94ba21.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-0c18c268.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-6d884cd7.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-e3424619.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-71c0b945.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-81a1a424.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-7b695cd0.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-9652fb0b.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-96ec2bcc.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-21ac0bbb.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-ce2b9792.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-457db1c3.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-0f2edeb6.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-e43678b8.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-fbbd1479.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-29f546de.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-ac8db622.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-1527bab4.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-d00b74d3.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-3f04489f.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-420b8424.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-35f4840d.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-694e15ee.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-e1ac0969.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-52960ec1.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-8df91e3a.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-27b6d5ff.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-4c6a240b.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-0e4d8c75.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-48314c2d.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-750b66ca.js" as="script"><link rel="prefetch" href="/course-material/assets/README.md.html-06750eae.js" as="script"><link rel="prefetch" href="/course-material/assets/exam-2020-08-13.html-3b854212.js" as="script"><link rel="prefetch" href="/course-material/assets/exam-2022-10-19.html-0861989b.js" as="script"><link rel="prefetch" href="/course-material/assets/exam-2023-01-08.html-186f611f.js" as="script"><link rel="prefetch" href="/course-material/assets/exam-2023-08-15.html-40d2039b.js" as="script"><link rel="prefetch" href="/course-material/assets/exam-2021-02-18.html-a95300ae.js" as="script"><link rel="prefetch" href="/course-material/assets/exam-2022-12-15.html-e58abd32.js" as="script"><link rel="prefetch" href="/course-material/assets/exam-2023-02-15.html-cfdc437b.js" as="script"><link rel="prefetch" href="/course-material/assets/exam-2023-08-14.html-8e8d761a.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-71342ecb.js" as="script"><link rel="prefetch" href="/course-material/assets/exam-2021-08-22.html-e1194f1f.js" as="script"><link rel="prefetch" href="/course-material/assets/exam-2023-03-23.html-52e52c57.js" as="script"><link rel="prefetch" href="/course-material/assets/exam-2023-06-12.html-8be2f755.js" as="script"><link rel="prefetch" href="/course-material/assets/exam-2023-08-20.html-ac24b37e.js" as="script"><link rel="prefetch" href="/course-material/assets/exam-2021-08-16.html-a5002a6e.js" as="script"><link rel="prefetch" href="/course-material/assets/exam-2022-10-20.html-56e1dff2.js" as="script"><link rel="prefetch" href="/course-material/assets/exam-2023-01-14.html-80700008.js" as="script"><link rel="prefetch" href="/course-material/assets/exam-2023-08-16.html-f70cb453.js" as="script"><link rel="prefetch" href="/course-material/assets/404.html-bd7a96c7.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-9d6b6e85.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-c55c622b.js" as="script"><link rel="prefetch" href="/course-material/assets/course-syllabus.html-19411974.js" as="script"><link rel="prefetch" href="/course-material/assets/laboratory-work.html-8c77df3d.js" as="script"><link rel="prefetch" href="/course-material/assets/lectures.html-55474e8f.js" as="script"><link rel="prefetch" href="/course-material/assets/project-grading-guidelines.html-758da38e.js" as="script"><link rel="prefetch" href="/course-material/assets/project-work.html-9854d925.js" as="script"><link rel="prefetch" href="/course-material/assets/study-guide.html-57236790.js" as="script"><link rel="prefetch" href="/course-material/assets/time-plan.html-ed890acd.js" as="script"><link rel="prefetch" href="/course-material/assets/tutorials.html-42605318.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-0e1c170c.js" as="script"><link rel="prefetch" href="/course-material/assets/course-syllabus.html-c17386d8.js" as="script"><link rel="prefetch" href="/course-material/assets/laboratory-work.html-e3cba7de.js" as="script"><link rel="prefetch" href="/course-material/assets/lectures.html-82b21d7a.js" as="script"><link rel="prefetch" href="/course-material/assets/project-grading-guidelines.html-8d76a9d6.js" as="script"><link rel="prefetch" href="/course-material/assets/project-work.html-cb20c121.js" as="script"><link rel="prefetch" href="/course-material/assets/study-guide.html-9eed695d.js" as="script"><link rel="prefetch" href="/course-material/assets/time-plan.html-db853b87.js" as="script"><link rel="prefetch" href="/course-material/assets/tutorials.html-e4769ffc.js" as="script"><link rel="prefetch" href="/course-material/assets/written-examination.html-b88e3be6.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-546edc11.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-fe054def.js" as="script"><link rel="prefetch" href="/course-material/assets/course-syllabus.html-11a1b8c0.js" as="script"><link rel="prefetch" href="/course-material/assets/exercises.html-e92bd999.js" as="script"><link rel="prefetch" href="/course-material/assets/laboratory-work.html-0f7811f3.js" as="script"><link rel="prefetch" href="/course-material/assets/lectures.html-3e3869c7.js" as="script"><link rel="prefetch" href="/course-material/assets/repetition-exercises.html-48788273.js" as="script"><link rel="prefetch" href="/course-material/assets/study-guide.html-bdcffc57.js" as="script"><link rel="prefetch" href="/course-material/assets/time-plan.html-3947c927.js" as="script"><link rel="prefetch" href="/course-material/assets/written-examination.html-59893208.js" as="script"><link rel="prefetch" href="/course-material/assets/lab-1-example.html-0383fa61.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-bd7b2c80.js" as="script"><link rel="prefetch" href="/course-material/assets/course-syllabus.html-892064ef.js" as="script"><link rel="prefetch" href="/course-material/assets/laboratory-work.html-d2e88441.js" as="script"><link rel="prefetch" href="/course-material/assets/lectures.html-bdead9d6.js" as="script"><link rel="prefetch" href="/course-material/assets/project-grading-guidelines.html-139f1ed7.js" as="script"><link rel="prefetch" href="/course-material/assets/project-work.html-5a6b1086.js" as="script"><link rel="prefetch" href="/course-material/assets/study-guide.html-38ed5a6b.js" as="script"><link rel="prefetch" href="/course-material/assets/time-plan.html-887eeda4.js" as="script"><link rel="prefetch" href="/course-material/assets/tutorials.html-cd4fa4b3.js" as="script"><link rel="prefetch" href="/course-material/assets/written-examination.html-32b1b0c9.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-c02acb36.js" as="script"><link rel="prefetch" href="/course-material/assets/course-syllabus.html-352fa0dd.js" as="script"><link rel="prefetch" href="/course-material/assets/exercises.html-2a58b444.js" as="script"><link rel="prefetch" href="/course-material/assets/feedback.html-8a5bd1fb.js" as="script"><link rel="prefetch" href="/course-material/assets/lectures.html-de4ffa8c.js" as="script"><link rel="prefetch" href="/course-material/assets/project-grading-guidelines.html-3f44b5fa.js" as="script"><link rel="prefetch" href="/course-material/assets/project-work.html-986284ee.js" as="script"><link rel="prefetch" href="/course-material/assets/study-guide.html-7b04782a.js" as="script"><link rel="prefetch" href="/course-material/assets/time-plan.html-083448ab.js" as="script"><link rel="prefetch" href="/course-material/assets/tutorials.html-b3b9e54c.js" as="script"><link rel="prefetch" href="/course-material/assets/written-examination.html-30e3e965.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-162d3bac.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-d5f0ba38.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-a3c2da79.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-446e04e9.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-5c3de69b.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-7a4f9e2a.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-9d530e85.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-978dbbff.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-c370c1ab.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-3a620b2e.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-d9c910c1.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-df90cb96.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-c595a339.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-6023abc3.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-03b4ab47.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-dfdf1b7d.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-ba195070.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-cce3a1f6.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-052ee4f2.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-f3fb9ff8.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-100fa967.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-472caa35.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-66d08122.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-c50ea3e2.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-63f3ee1e.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-fab2482c.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-fdec9c60.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-107417b5.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-c648fa3d.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-128d5a5b.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-ffc2a8cc.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-9df06152.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-dc48837a.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-a797882f.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-e385cd17.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-9435d56d.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-1edecd5f.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-7fea1ea7.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-3e575241.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-9e285f76.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-a95f251b.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-f4a661a7.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-2fae7aa1.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-874c36ea.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-b86cbe90.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-d5c785db.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-cfa7f8a9.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-f1177471.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-b8508eb0.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-2d256cba.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-55019409.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-bc8e223f.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-412bb767.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-259aa892.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-f08d574c.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-525e31c8.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-93ef7f0c.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-1f5e80ec.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-b8e48d43.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-575e3ac0.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-7902d681.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-63411330.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-874e1bce.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-5e570b84.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-de539279.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-62853cc1.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-22279de0.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-bc3fc024.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-407654e4.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-9741b569.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-eadc05fc.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-0ee6b14c.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-23e2ce3b.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-1a711f28.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-0c8aeb0f.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-1d74956b.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-acd9f3ea.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-31703a6a.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-34b35d6b.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-0ecf01f5.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-65727ebe.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-2ba8b81c.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-4d22ca1b.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-7b046d3a.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-a0020109.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-31cab038.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-73d04bc1.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-dc90fc11.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-f9ea8bde.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-37daf5a0.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-2502dd63.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-ff9da2b5.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-1c2d818a.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-b1a34878.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-c0cdc940.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-a775c255.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-1cf58f47.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-b87b6fbc.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-1c4d6e65.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-c1c6bd48.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-3dd662b4.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-8ad7107c.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-a8b09eed.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-5cfb62e8.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-4643d0db.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-135fe0ca.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-60dbd6cc.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-5dfbd05c.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-2ea673e6.js" as="script"><link rel="prefetch" href="/course-material/assets/README.md.html-2b212120.js" as="script"><link rel="prefetch" href="/course-material/assets/exam-2020-08-13.html-9cfbf247.js" as="script"><link rel="prefetch" href="/course-material/assets/exam-2022-10-19.html-d9044d32.js" as="script"><link rel="prefetch" href="/course-material/assets/exam-2023-01-08.html-6c29ec31.js" as="script"><link rel="prefetch" href="/course-material/assets/exam-2023-08-15.html-189f773d.js" as="script"><link rel="prefetch" href="/course-material/assets/exam-2021-02-18.html-b875c862.js" as="script"><link rel="prefetch" href="/course-material/assets/exam-2022-12-15.html-be839048.js" as="script"><link rel="prefetch" href="/course-material/assets/exam-2023-02-15.html-ddbd56ea.js" as="script"><link rel="prefetch" href="/course-material/assets/exam-2023-08-14.html-e2707ff2.js" as="script"><link rel="prefetch" href="/course-material/assets/index.html-40a25fb2.js" as="script"><link rel="prefetch" href="/course-material/assets/exam-2021-08-22.html-603dbeb5.js" as="script"><link rel="prefetch" href="/course-material/assets/exam-2023-03-23.html-ab5e65ca.js" as="script"><link rel="prefetch" href="/course-material/assets/exam-2023-06-12.html-221b9982.js" as="script"><link rel="prefetch" href="/course-material/assets/exam-2023-08-20.html-0e046958.js" as="script"><link rel="prefetch" href="/course-material/assets/exam-2021-08-16.html-8083e2ec.js" as="script"><link rel="prefetch" href="/course-material/assets/exam-2022-10-20.html-fabb10b4.js" as="script"><link rel="prefetch" href="/course-material/assets/exam-2023-01-14.html-ba7ba064.js" as="script"><link rel="prefetch" href="/course-material/assets/exam-2023-08-16.html-4f28f5bb.js" as="script"><link rel="prefetch" href="/course-material/assets/404.html-61da4fbc.js" as="script"><link rel="prefetch" href="/course-material/assets/AcademicYearFigure-3c5e08b6.js" as="script"><link rel="prefetch" href="/course-material/assets/CompactInfo-3d49f7a8.js" as="script"><link rel="prefetch" href="/course-material/assets/ExamQuestion-f4061104.js" as="script"><link rel="prefetch" href="/course-material/assets/Figure-8405d225.js" as="script"><link rel="prefetch" href="/course-material/assets/FigureNumber-300abf83.js" as="script"><link rel="prefetch" href="/course-material/assets/GradingGuideline-ec536132.js" as="script"><link rel="prefetch" href="/course-material/assets/ILOsActivitiesMapping-5bbd8867.js" as="script"><link rel="prefetch" href="/course-material/assets/RenderMermaid-209b3ee0.js" as="script"><link rel="prefetch" href="/course-material/assets/ReportMistake-dd508986.js" as="script"><link rel="prefetch" href="/course-material/assets/SampleAnswer-f61747e8.js" as="script"><link rel="prefetch" href="/course-material/assets/SleepButton-2a1115f4.js" as="script"><link rel="prefetch" href="/course-material/assets/Smartphone-99f56caa.js" as="script"><link rel="prefetch" href="/course-material/assets/StudyGuideInfo-6e4c4a3b.js" as="script"><link rel="prefetch" href="/course-material/assets/Teacher-cea4c7db.js" as="script"><link rel="prefetch" href="/course-material/assets/TimePlan-7e6c28cb.js" as="script"><link rel="prefetch" href="/course-material/assets/setupDevtools-X4YFRK4B-c5dd00e2.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/course-material/" class=""><!----><span class="site-name">Course Material</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/course-material/" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Courses"><span class="title">Courses</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Courses"><span class="title">Courses</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/course-material/courses/android-development/" class="" aria-label="Android Development 2023"><!--[--><!--]--> Android Development 2023 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/course-material/courses/client-server-communication/" class="" aria-label="Client-Server Communication 2022"><!--[--><!--]--> Client-Server Communication 2022 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/course-material/courses/git/" class="" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/course-material/courses/introduction-to-script-programming/" class="" aria-label="Introduction to Script Programming 2022"><!--[--><!--]--> Introduction to Script Programming 2022 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/course-material/courses/web-development-advanced-concepts/" class="" aria-label="Web Development - Advanced Concepts 2023"><!--[--><!--]--> Web Development - Advanced Concepts 2023 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/course-material/courses/web-development-fundamentals/" class="" aria-label="Web Development Fundamentals 2022"><!--[--><!--]--> Web Development Fundamentals 2022 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/PeppeL-G/course-material/issues" rel="noopener noreferrer" target="_blank" aria-label="Get Help"><!--[--><!--]--> Get Help <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/course-material/" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Courses"><span class="title">Courses</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Courses"><span class="title">Courses</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/course-material/courses/android-development/" class="" aria-label="Android Development 2023"><!--[--><!--]--> Android Development 2023 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/course-material/courses/client-server-communication/" class="" aria-label="Client-Server Communication 2022"><!--[--><!--]--> Client-Server Communication 2022 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/course-material/courses/git/" class="" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/course-material/courses/introduction-to-script-programming/" class="" aria-label="Introduction to Script Programming 2022"><!--[--><!--]--> Introduction to Script Programming 2022 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/course-material/courses/web-development-advanced-concepts/" class="" aria-label="Web Development - Advanced Concepts 2023"><!--[--><!--]--> Web Development - Advanced Concepts 2023 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/course-material/courses/web-development-fundamentals/" class="" aria-label="Web Development Fundamentals 2022"><!--[--><!--]--> Web Development Fundamentals 2022 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/PeppeL-G/course-material/issues" rel="noopener noreferrer" target="_blank" aria-label="Get Help"><!--[--><!--]--> Get Help <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Asynchronous Programming in JavaScript <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/course-material/lectures/asynchronous-programming-in-js/#what-is-synchronous-programming" class="router-link-active router-link-exact-active sidebar-item" aria-label="What is Synchronous Programming?"><!--[--><!--]--> What is Synchronous Programming? <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/course-material/lectures/asynchronous-programming-in-js/#what-s-the-problem-with-synchronous-programming" class="router-link-active router-link-exact-active sidebar-item" aria-label="What&#39;s the Problem with Synchronous Programming?"><!--[--><!--]--> What&#39;s the Problem with Synchronous Programming? <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/course-material/lectures/asynchronous-programming-in-js/#example-1-graphical-user-interfaces" class="router-link-active router-link-exact-active sidebar-item" aria-label="Example 1: Graphical User Interfaces"><!--[--><!--]--> Example 1: Graphical User Interfaces <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/course-material/lectures/asynchronous-programming-in-js/#example-2-data-loading" class="router-link-active router-link-exact-active sidebar-item" aria-label="Example 2: Data Loading"><!--[--><!--]--> Example 2: Data Loading <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/course-material/lectures/asynchronous-programming-in-js/#what-is-asynchronous-programming" class="router-link-active router-link-exact-active sidebar-item" aria-label="What is Asynchronous Programming?"><!--[--><!--]--> What is Asynchronous Programming? <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/course-material/lectures/asynchronous-programming-in-js/#asynchronous-programming-with-callback-functions" class="router-link-active router-link-exact-active sidebar-item" aria-label="Asynchronous Programming with Callback Functions"><!--[--><!--]--> Asynchronous Programming with Callback Functions <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/course-material/lectures/asynchronous-programming-in-js/#error-handling" class="router-link-active router-link-exact-active sidebar-item" aria-label="Error Handling"><!--[--><!--]--> Error Handling <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/course-material/lectures/asynchronous-programming-in-js/#the-drawback-with-asynchronous-programming-with-callback-functions" class="router-link-active router-link-exact-active sidebar-item" aria-label="The Drawback with Asynchronous Programming with Callback Functions"><!--[--><!--]--> The Drawback with Asynchronous Programming with Callback Functions <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/course-material/lectures/asynchronous-programming-in-js/#what-are-promises" class="router-link-active router-link-exact-active sidebar-item" aria-label="What are Promises?"><!--[--><!--]--> What are Promises? <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/course-material/lectures/asynchronous-programming-in-js/#async-and-await" class="router-link-active router-link-exact-active sidebar-item" aria-label="Async and Await"><!--[--><!--]--> Async and Await <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/course-material/lectures/asynchronous-programming-in-js/#how-to-create-promises" class="router-link-active router-link-exact-active sidebar-item" aria-label="How to Create Promises"><!--[--><!--]--> How to Create Promises <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/course-material/lectures/asynchronous-programming-in-js/#recommended-reading" class="router-link-active router-link-exact-active sidebar-item" aria-label="Recommended Reading"><!--[--><!--]--> Recommended Reading <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="asynchronous-programming-in-javascript" tabindex="-1"><a class="header-anchor" href="#asynchronous-programming-in-javascript" aria-hidden="true">#</a> Asynchronous Programming in JavaScript</h1><p>In this lecture we&#39;ll take a look at how synchronous programming differs from asynchronous programming, when you should use which one, and how we can use asynchronous programming in JavaScript through <em>callback functions</em>, <em>promises</em> and <em>promises with <code>async</code> and <code>wait</code></em>.</p><h2 id="what-is-synchronous-programming" tabindex="-1"><a class="header-anchor" href="#what-is-synchronous-programming" aria-hidden="true">#</a> What is Synchronous Programming?</h2><p>When you first learned programming, <em>synchronous programming</em> is most likely what you learned. In synchronous programming, one thing is carried out at a time, and you don&#39;t start doing the next thing until the first thing is done. You can think of that <em>thing</em> as a function, as shown in <span class="whole" data-v-b8e13602><!----><span class="figureNumber" data-v-b8e13602></span><!----></span> below.</p><figure data-v-82d3229c><!--[--><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// Example of a synchronous function.</span>
<span class="token keyword">function</span> <span class="token function">getSum</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">const</span> sum <span class="token operator">=</span> x <span class="token operator">+</span> y
	<span class="token keyword">return</span> sum
<span class="token punctuation">}</span>

<span class="token comment">// Example of calls to a synchronous function.</span>
<span class="token keyword">const</span> sum1 <span class="token operator">=</span> <span class="token function">getSum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> sum2 <span class="token operator">=</span> <span class="token function">getSum</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sum1 <span class="token operator">+</span> sum2<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--><figcaption data-v-82d3229c>Example of synchronous programming in JavaScript.</figcaption><span class="incrementFigureNumber" data-v-82d3229c></span></figure><p>In <span class="whole" data-v-b8e13602><span class="decrementFigureNumber" data-v-b8e13602></span><span class="figureNumber" data-v-b8e13602></span><span class="incrementFigureNumber" data-v-b8e13602></span></span> above, <code>getSum()</code> is a synchronous function. What that means is that when <code>getSum(1, 2)</code> is called, <code>getSum()</code> will do all it&#39;s work, and then return back the result and store it in <code>sum1</code>. Then we continue with the call <code>getSum(3, 4)</code> on next line, and <code>getSum()</code> will again do it&#39;s entire work, and then return back the result, which we then store in <code>sum2</code>.</p><p>This sounds obvious, right? Well, that&#39;s because it works the way you&#39;re used to.</p><h2 id="what-s-the-problem-with-synchronous-programming" tabindex="-1"><a class="header-anchor" href="#what-s-the-problem-with-synchronous-programming" aria-hidden="true">#</a> What&#39;s the Problem with Synchronous Programming?</h2><p>The problem with synchronous programming occurs when we have <em>long running operations</em> and want to be able to do multiple things at the same time. What counts as a long running operation depends on what type of application you create, but usually operations taking than a few milliseconds to complete count as long running. The problem with synchronous programming is that we can only run one long running operation at a time, and that is problematic from some type of applications. A few examples of these are given next.</p><h3 id="example-1-graphical-user-interfaces" tabindex="-1"><a class="header-anchor" href="#example-1-graphical-user-interfaces" aria-hidden="true">#</a> Example 1: Graphical User Interfaces</h3><p>One problem with synchronous programming occurs when we implement a graphical user interface (GUI). Imagine the user clicks on a button, and we start to compute something that takes 3 seconds to compute. If we use synchronous programming, nothing else in our code during those 3 seconds would run, so the graphical user interface would freeze, so the user can&#39;t click on an abort button, nor do anything else. Want an example of this? Just click <button><!--[-->this button<!--]--></button> and then try to select text on this page, click on a link, or something, within 3 seconds (requires JavaScript to be enabled in your web browser).</p><p>The code in <span class="whole" data-v-b8e13602><!----><span class="figureNumber" data-v-b8e13602></span><!----></span> below explains the problem in detail.</p><figure data-v-82d3229c><!--[--><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// This is the function that is called when the button is clicked.</span>
<span class="token keyword">function</span> <span class="token function">handleClickOnButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">// Imagine the sleep() function would exist, and calling it with</span>
	<span class="token comment">// 3000 would make the function wait 3000ms before it returned.</span>
	<span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span>
	<span class="token comment">// Then non of our code would execute during those 3000ms,</span>
	<span class="token comment">// and the GUI would freeze.</span>
	<span class="token comment">// (JS doesn&#39;t have a such stupid function, so it doesn&#39;t exist). </span>
<span class="token punctuation">}</span>

<span class="token comment">// The sleep function in this example is implemented like this</span>
<span class="token comment">// (we use a loop with very many iterations to simulate a long running operation):</span>
<span class="token keyword">function</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token parameter">sleepMs</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">const</span> timeToWakeUp <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> sleepMs
	<span class="token keyword">while</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> timeToWakeUp<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token comment">// Do nothing</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--><figcaption data-v-82d3229c>Example of problem with synchronous programming.</figcaption><span class="incrementFigureNumber" data-v-82d3229c></span></figure><p>In this example, the long running operation was just a loop doing nothing for many iterations, but you can substitute it with any operation that takes long time to complete, for example to check if there&#39;s a human in the world named <code>Chipsope</code> (would in worst case require you to compare <code>Chipsope</code> with ~7 billion names, which would take a while).</p><h3 id="example-2-data-loading" tabindex="-1"><a class="header-anchor" href="#example-2-data-loading" aria-hidden="true">#</a> Example 2: Data Loading</h3><p>One problem with synchronous programming occurs when we want to carry out multiple tasks in parallel, and each task involves a lot of waiting, such as:</p><ul><li>Waiting for the result of a query sent to the database</li><li>Waiting for the response for an HTTP request we have sent</li><li>Waiting for GPS coordinates from a GPS receiver</li><li>Waiting for the computer to load the content of a file on the file system</li><li>Etc.</li></ul><p>If we use synchronous programming, then we start carrying out the first task, which involves some waiting for the result (for example from the database). When we get back the result, we finish carrying out the first task, and then we start carrying out the second task, which shortly makes us wait again for another result (perhaps loading the content from a file), and then when we finally get back the result for that, we finish the second task, and so on. This is visualized in <span class="whole" data-v-b8e13602><!----><span class="figureNumber" data-v-b8e13602></span><!----></span> below.</p><figure data-v-82d3229c><!--[--><div class="mermaid" data-v-35f3a9b6></div><!--]--><figcaption data-v-82d3229c>Sequence diagram where the app waits for three things at three different times (3 seconds in total).</figcaption><span class="incrementFigureNumber" data-v-82d3229c></span></figure><p>The problem here is that we spend most of our time on waiting, instead of doing useful work. While we wait for the database result from task 1, we want to start carrying out task 2, and wait for the result for task 2 at the same time as we wait for the result from task 1, but we can&#39;t do that with synchronous programming, since we can only do one thing at a time in synchronous programming.</p><p>An example of this is shown in <span class="whole" data-v-b8e13602><!----><span class="figureNumber" data-v-b8e13602></span><!----></span> below.</p><figure data-v-82d3229c><!--[--><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getAllHumans</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">// Imagine db.getAllRows() would be a synchronous function, and it would</span>
	<span class="token comment">// take 1 second before it has received the humans from the database.</span>
	<span class="token keyword">const</span> allHumans <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">getAllRows</span><span class="token punctuation">(</span><span class="token string">&quot;humans&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> allHumans
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getAllPets</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">// Imagine fileSystem.loadFile() would be a synchronous function, and</span>
	<span class="token comment">// it would take 1 second before it has loaded the pets from the file.</span>
	<span class="token keyword">const</span> allPets <span class="token operator">=</span> fileSystem<span class="token punctuation">.</span><span class="token function">loadFile</span><span class="token punctuation">(</span><span class="token string">&quot;pets.json&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> allPets
<span class="token punctuation">}</span>

<span class="token keyword">const</span> humans <span class="token operator">=</span> <span class="token function">getAllHumans</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// This line would take 1.001 seconds to complete (1 second spent on waiting).</span>
<span class="token keyword">const</span> pets <span class="token operator">=</span> <span class="token function">getAllPets</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// This line would take 1.001 seconds to complete (1 second spent on waiting).</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--><figcaption data-v-82d3229c>Another example of problem with synchronous programming. </figcaption><span class="incrementFigureNumber" data-v-82d3229c></span></figure><p>In <span class="whole" data-v-b8e13602><span class="decrementFigureNumber" data-v-b8e13602></span><span class="figureNumber" data-v-b8e13602></span><span class="incrementFigureNumber" data-v-b8e13602></span></span> above it takes ~2 seconds to load all data, but if humans and pets could be loaded in parallel, it would only take ~1 second. You don&#39;t like applications that takes a long time to load all the data at startup, right? So you probably don&#39;t want to use synchronous programming to load data at startup.</p><h2 id="what-is-asynchronous-programming" tabindex="-1"><a class="header-anchor" href="#what-is-asynchronous-programming" aria-hidden="true">#</a> What is Asynchronous Programming?</h2><p>So, asynchronous programming is when we start a long running operation, and it will run <em>in the background</em>. The rest of our code will continue to run as usual until it has completed. Then, sometime in the future, the long running operation in the background will complete, and notify our ordinary code what the result of the long running operation was, and our ordinary code can handle the result of the long running operation. A visualization of this is shown in <span class="whole" data-v-b8e13602><!----><span class="figureNumber" data-v-b8e13602></span><!----></span> below.</p><figure data-v-82d3229c><!--[--><div class="mermaid" data-v-35f3a9b6></div><!--]--><figcaption data-v-82d3229c>Sequence diagram where the app waits for three things at the same time (1 second in total).</figcaption><span class="incrementFigureNumber" data-v-82d3229c></span></figure><div class="custom-container tip"><p class="custom-container-title">Long running operations that aren&#39;t waiting</p><p>Here we say that long running operations usually involve a lot of waiting. Long running operations can instead/also do useful work, e.g. compute something really complex that takes a very long time to compute. These operations can still run in the background at the same time as our ordinary synchronous code thanks to threads and multiple cores (or in worst case time slicing of the CPU). These are details we don&#39;t worry about in this lecture, but just remember that asynchronous programming is not only useful when waiting is involved, but for all types of long running operations.</p></div><p>The question is how a long running operation can tell our ordinary code when it&#39;s done with it works in the background, and what the result is. That can be done in different ways, such as by using callback functions or promises.</p><h2 id="asynchronous-programming-with-callback-functions" tabindex="-1"><a class="header-anchor" href="#asynchronous-programming-with-callback-functions" aria-hidden="true">#</a> Asynchronous Programming with Callback Functions</h2><p>In asynchronous programming, one way to indicate what should happen after a long running operation has completed is to pass a <code>callback</code> function to the asynchronous function, and when the asynchronous function has completed its long running operation, it will call the <code>callback</code> function, and pass the result of the long running operation as an argument to the <code>callback</code> function. In the <code>callback</code> function we write the code that should run when the long running operation has completed.</p><p>For example, if we have the synchronous function in <span class="whole" data-v-b8e13602><!----><span class="figureNumber" data-v-b8e13602></span><!----></span> below.</p><figure data-v-82d3229c><!--[--><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// Synchronous function that returns back the result.</span>
<span class="token keyword">function</span> <span class="token function">getSum</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">const</span> theSum <span class="token operator">=</span> x <span class="token operator">+</span> y
	<span class="token keyword">return</span> theSum
<span class="token punctuation">}</span>

<span class="token keyword">const</span> sum <span class="token operator">=</span> <span class="token function">getSum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--><figcaption data-v-82d3229c>Example of a synchronous function.</figcaption><span class="incrementFigureNumber" data-v-82d3229c></span></figure><p>And would like to use this in an asynchronous way with a <code>callback</code> function, it would look as shown in <span class="whole" data-v-b8e13602><!----><span class="figureNumber" data-v-b8e13602></span><!----></span> below.</p><figure data-v-82d3229c><!--[--><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// Asynchronous function that calls the callback function with the result.</span>
<span class="token keyword">function</span> <span class="token function">getSum</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

	<span class="token comment">// This is the &quot;work&quot; the &quot;long running operation&quot; should do.</span>
	<span class="token keyword">const</span> theSum <span class="token operator">=</span> x <span class="token operator">+</span> y

	<span class="token comment">// When the result of the work has been computed, pass it to the callback function.</span>
	<span class="token function">callback</span><span class="token punctuation">(</span>theSum<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token comment">// Call the asynchronous function, and pass along our callback function.</span>
<span class="token function">getSum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">sum</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

	<span class="token comment">// When this function is called, the long running operation has completed.</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--><figcaption data-v-82d3229c>Example of an asynchronous function that will run synchronously.</figcaption><span class="incrementFigureNumber" data-v-82d3229c></span></figure><p>Even though <code>getSum()</code> above has a <code>callback</code> function as a parameter, everything will run synchronously, as you&#39;re used to. That&#39;s because we don&#39;t do any work that runs <em>in the background</em>. To make <code>getSum()</code> asynchronous, we need to tell it to do it&#39;s work in the background somehow. In JavaScript, you can do that by calling an asynchronous built-in function, like:</p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API" target="_blank" rel="noopener noreferrer">fetch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> (to send an HTTP request)</li><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout" target="_blank" rel="noopener noreferrer">setTimeout<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> (to schedule a function to be called later)</li><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setInterval" target="_blank" rel="noopener noreferrer">setInterval<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> (to schedule a function to be called repeatedly with a given interval)</li><li>Etc.</li></ul><p>To really make <code>getSum()</code> asynchronous, we can call <code>setTimeout()</code> in it, as shown in <span class="whole" data-v-b8e13602><!----><span class="figureNumber" data-v-b8e13602></span><!----></span> below.</p><figure data-v-82d3229c><!--[--><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// Asynchronous function that calls the callback function with the result.</span>
<span class="token keyword">function</span> <span class="token function">getSum</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

	<span class="token comment">// Here we call an asynchronous function, making our own function asynchronous.</span>
	<span class="token comment">// In this case we schedule the function below to be called 1 second later.</span>
	<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		
		<span class="token keyword">const</span> theSum <span class="token operator">=</span> x <span class="token operator">+</span> y
		<span class="token function">callback</span><span class="token punctuation">(</span>theSum<span class="token punctuation">)</span>

	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>

	<span class="token comment">// Here we return back immediately, before we have computed the sum.</span>

<span class="token punctuation">}</span>

<span class="token comment">// This will call our own asynchronous function,</span>
<span class="token comment">// which will call setTimeout(), and then return here immediately.</span>
<span class="token function">getSum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">sum</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// This will call our own asynchronous function,</span>
<span class="token comment">// which will call setTimeout(), and then return here immediately.</span>
<span class="token function">getSum</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">sum</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// This is the first value that will be logged.</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello!&quot;</span><span class="token punctuation">)</span>

<span class="token comment">// 1 second later, the two callback functions we have passed to setTimeout()</span>
<span class="token comment">// will be called (one at a time), which in turn will compute their sums</span>
<span class="token comment">// and call the callback functions we passed to getSum(), in which we log</span>
<span class="token comment">// the computed sums (first 3, then 7).</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--><figcaption data-v-82d3229c>Example of an asynchronous function that will run asynchronously.</figcaption><span class="incrementFigureNumber" data-v-82d3229c></span></figure><p>So, to summarize:</p><ol><li>To make a function asynchronous, it must somehow do work in the background, for example by calling an existing asynchronous function.</li><li>To listen for when an asynchronous function is done running in the background, we can pass a <code>callback</code> function to it, which the asynchronous function will call when it&#39;s done running in the background.</li></ol><h3 id="error-handling" tabindex="-1"><a class="header-anchor" href="#error-handling" aria-hidden="true">#</a> Error Handling</h3><p>In synchronous programming, when you discover something is wrong, you usually throw an exception, which you later can catch, which you can see in <span class="whole" data-v-b8e13602><!----><span class="figureNumber" data-v-b8e13602></span><!----></span> below.</p><figure data-v-82d3229c><!--[--><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// A synchronous function that might throw an exception.</span>
<span class="token keyword">function</span> <span class="token function">getQuotient</span><span class="token punctuation">(</span><span class="token parameter">dividend<span class="token punctuation">,</span> divisor</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>divisor <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">throw</span> <span class="token string">&quot;Can&#39;t divide by 0.&quot;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> dividend <span class="token operator">/</span> divisor
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// The main code that contains the error handling.</span>
<span class="token keyword">try</span><span class="token punctuation">{</span>
	<span class="token keyword">const</span> quotient <span class="token operator">=</span> <span class="token function">getQuotient</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;The quotient is &quot;</span><span class="token operator">+</span>quotient<span class="token operator">+</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--><figcaption data-v-82d3229c>Example of error handling in synchronous programming using exceptions.</figcaption><span class="incrementFigureNumber" data-v-82d3229c></span></figure><p>If you try to do something similar in asynchronous programming with <code>callback</code> functions, it could look as shown in <span class="whole" data-v-b8e13602><!----><span class="figureNumber" data-v-b8e13602></span><!----></span> below.</p><figure data-v-82d3229c><!--[--><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// An asynchronous function that might throw an exception.</span>
<span class="token keyword">function</span> <span class="token function">getQuotient</span><span class="token punctuation">(</span><span class="token parameter">dividend<span class="token punctuation">,</span> divisor<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>divisor <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token string">&quot;Can&#39;t divide by 0.&quot;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
			<span class="token function">callback</span><span class="token punctuation">(</span>dividend <span class="token operator">/</span> divisor<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// The main code that needs to handle errors.</span>
<span class="token keyword">try</span><span class="token punctuation">{</span>
	<span class="token function">getQuotient</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">quotient</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;The quotient is &quot;</span><span class="token operator">+</span>quotient<span class="token operator">+</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--><figcaption data-v-82d3229c>Trying to catch exceptions when calling an asynchronous function.</figcaption><span class="incrementFigureNumber" data-v-82d3229c></span></figure><p>This does unfortunately not work. The reason is simple: when you call <code>getQuotient()</code>, you are inside the try block, but <code>getQuotient()</code> returns back almost immediately, and you will leave the try/catch block. Then 1 second later, the callback you passed to <code>setTimeout()</code> will be called, and if you now throw the exception from inside that callback, you will throw it to the one who called the callback function, which will be the JavaScript runtime environment, so that&#39;s where the exception will be thrown to, and there of course no one is trying to catch the specific exceptions your code throws.</p><p>The workaround to this problem is usually to pass two values to the <code>callback</code> function. The first value is the exception (aka &quot;the error&quot;). If everything go well and you don&#39;t have an error, you simply use <code>null</code> as the error. The second value is the result of the long running operation. In your <code>callback</code> function you simply check if the first argument is <code>null</code> or not with an if statement to figure out if you got an error, as shown in <span class="whole" data-v-b8e13602><!----><span class="figureNumber" data-v-b8e13602></span><!----></span> below.</p><figure data-v-82d3229c><!--[--><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getQuotient</span><span class="token punctuation">(</span><span class="token parameter">dividend<span class="token punctuation">,</span> divisor<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>divisor <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token function">callback</span><span class="token punctuation">(</span><span class="token string">&quot;Can&#39;t divide by 0&quot;</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
			<span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> dividend <span class="token operator">/</span> divisor<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">getQuotient</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> quotient</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;The quotient is &quot;</span><span class="token operator">+</span>quotient<span class="token operator">+</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--><figcaption data-v-82d3229c>Example of error handling in asynchronous programming with callback functions.</figcaption><span class="incrementFigureNumber" data-v-82d3229c></span></figure><h2 id="the-drawback-with-asynchronous-programming-with-callback-functions" tabindex="-1"><a class="header-anchor" href="#the-drawback-with-asynchronous-programming-with-callback-functions" aria-hidden="true">#</a> The Drawback with Asynchronous Programming with Callback Functions</h2><p>The drawback with asynchronous programming with <code>callback</code> functions is that it makes the code harder to read compared to synchronous programming, especially when you have many asynchronous functions you need to call in order, as shown in <span class="whole" data-v-b8e13602><!----><span class="figureNumber" data-v-b8e13602></span><!----></span> below.</p><figure data-v-82d3229c><!--[--><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// Imagine getUserById(), getPetsByOwnerName() and</span>
<span class="token comment">// storeInJsonFile() are all asynchronous functions.</span>
<span class="token keyword">function</span> <span class="token function">loadUserWithPetsAndStoreInFile</span><span class="token punctuation">(</span><span class="token parameter">userId<span class="token punctuation">,</span> filename<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token function">getUserById</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">userError<span class="token punctuation">,</span> user</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>userError<span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token function">callback</span><span class="token punctuation">(</span>userError<span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
			<span class="token function">getPetsByOwnerName</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">petsError<span class="token punctuation">,</span> pets</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>petsError<span class="token punctuation">)</span><span class="token punctuation">{</span>
					<span class="token function">callback</span><span class="token punctuation">(</span>petsError<span class="token punctuation">)</span>
				<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
					<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
						pets
					<span class="token punctuation">}</span>
					<span class="token function">storeInJsonFile</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> filename<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">storeError<span class="token punctuation">,</span> fileSize</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
						<span class="token keyword">if</span><span class="token punctuation">(</span>storeError<span class="token punctuation">)</span><span class="token punctuation">{</span>
							<span class="token function">callback</span><span class="token punctuation">(</span>storeError<span class="token punctuation">)</span>
						<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
							<span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> fileSize<span class="token punctuation">)</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--><figcaption data-v-82d3229c>Example of sequential calls to asynchronous functions with callbacks.</figcaption><span class="incrementFigureNumber" data-v-82d3229c></span></figure><p>This is just a simple example, but you can already now see that the code has become quite hard to read due to all the indentation of the code, especially at the end of the code, with all closing brackets. Imagine we would need to call more asynchronous functions, or use more loops or conditional statements, etc. This messy type of code is known as <a href="http://callbackhell.com/" target="_blank" rel="noopener noreferrer">Callback Hell<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><p>If we compare the code above with synchronous code with the same functionality, it would look as shown in <span class="whole" data-v-b8e13602><!----><span class="figureNumber" data-v-b8e13602></span><!----></span> below.</p><figure data-v-82d3229c><!--[--><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">loadUserWithPetsAndStoreInFile</span><span class="token punctuation">(</span><span class="token parameter">userId<span class="token punctuation">,</span> filename</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">try</span><span class="token punctuation">{</span>
		<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token function">getUserById</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span>
		<span class="token keyword">const</span> pets <span class="token operator">=</span> <span class="token function">getPetsByOwnerName</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
		<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
			pets
		<span class="token punctuation">}</span>
		<span class="token keyword">const</span> fileSize <span class="token operator">=</span> fileSystem<span class="token punctuation">.</span><span class="token function">storeInJsonFile</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> filename<span class="token punctuation">)</span>
		<span class="token keyword">return</span> fileSize
	<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">throw</span> error <span class="token comment">// Could even skip try and catch since we throw the error again, but whatever.</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--><figcaption data-v-82d3229c>Example of sequential calls to synchronous functions.</figcaption><span class="incrementFigureNumber" data-v-82d3229c></span></figure><p>Clearly, the synchronous code is much easier to read. So this is the trade off: synchronous code is easier to read, but asynchronous code can run more efficient, since we don&#39;t waste time on waiting, and we can do multiple things at the same time with asynchronous code. Wouldn&#39;t it be great if there was a way to get the best of both worlds? Introducing promises.</p><h2 id="what-are-promises" tabindex="-1"><a class="header-anchor" href="#what-are-promises" aria-hidden="true">#</a> What are Promises?</h2><p><em>Promises</em> is an attempt to make asynchronous code more readable and to avoid callback hell (making the code look more like synchronous code), but that still runs asynchronously. Instead of passing a <code>callback</code> to an asynchronous function, the asynchronous function returns back a promise. The promise is an object that represent a long running operation that will be completed some time in the future.</p><p>Initially, the promise will be in the <code>Pending</code> state, meaning that the long running operation is still running. When the long running operation complete (when the promise has been <em>resolved</em>), the promise will be in the <code>Fulfilled</code> state, and we can get the value the long running operations resulted in through the promise object. If something instead goes wrong with the long running operation (when the promise has been <em>rejected</em>), the promise will go into the <code>Rejected</code> state, and we can get the error through the promise object. This is visualized in <span class="whole" data-v-b8e13602><!----><span class="figureNumber" data-v-b8e13602></span><!----></span> below.</p><figure data-v-82d3229c><!--[--><div class="mermaid" data-v-35f3a9b6></div><!--]--><figcaption data-v-82d3229c>State diagram over promises.</figcaption><span class="incrementFigureNumber" data-v-82d3229c></span></figure><p>When you have called an asynchronous function and received back a promise from it, you usually want to listen for when the promise leaves the <code>Pending</code> state, and goes to either the <code>Pending</code> state or the <code>Fulfilled</code> state. You do that by calling <code>.then()</code> on the promise and <code>.catch()</code> on the promise respectively and pass them each a <code>callback</code> function.</p><p>For example, if <code>getQuotient()</code> would be an asynchronous function with a <code>callback</code> function, you would use it as shown in <span class="whole" data-v-b8e13602><!----><span class="figureNumber" data-v-b8e13602></span><!----></span> below.</p><figure data-v-82d3229c><!--[--><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">getQuotient</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> quotient</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;The quotient is &quot;</span><span class="token operator">+</span>quotient<span class="token operator">+</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--><figcaption data-v-82d3229c>Sample usage of an asynchronous function with a callback.</figcaption><span class="incrementFigureNumber" data-v-82d3229c></span></figure><p>If <code>getQuotient()</code> instead of having a <code>callback</code> function would return back a promise, you would use it as shown in <span class="whole" data-v-b8e13602><!----><span class="figureNumber" data-v-b8e13602></span><!----></span> below.</p><figure data-v-82d3229c><!--[--><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> promise <span class="token operator">=</span> <span class="token function">getQuotient</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token comment">// When the line above has been executed, the promise will be in the Pending state.</span>

promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">quotient</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">// When the promise has been resolved (enters the Fulfilled state),</span>
	<span class="token comment">// this function will be called.</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;The quotient is &quot;</span><span class="token operator">+</span>quotient<span class="token operator">+</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

promise<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">// When the promise has been rejected (enters the Rejected state),</span>
	<span class="token comment">// this function will be called.</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--><figcaption data-v-82d3229c>Sample usage of an asynchronous function returning a promise.</figcaption><span class="incrementFigureNumber" data-v-82d3229c></span></figure><p>Since we still provide callback functions to <code>.then()</code> and <code>.catch()</code>, you might think this code will result in callback hell as well when we start calling multiple asynchronous functions returning back promises, but that is not the case, because promises are <em>chainable</em>. This is the hard part to understand with promises, but this is what makes them so nice, so let&#39;s go through how chaining works in detail.</p><p>The callback function you pass to <code>.then()</code> can:</p><ol><li>Return back a new promise.</li><li>Return back another value that automatically will be wrapped in a promise that will be immediately resolved.</li><li>Not return back any value at all (i.e. <code>undefined</code>), in which case we can <strong>see it as</strong> the promise you called <code>.then()</code> on will be returned back.</li></ol><p>Note that you can <strong>see it as</strong> that the callback function you pass to <code>.then()</code> will always return back a promise. Promises are also implemented in a very clever way, so you can <strong>see it as</strong> the promise you return back from the callback function passed to <code>.then()</code> will also be returned from the call to <code>.then()</code>. All this and list item 3 above means that we can simplify the code we had earlier to the one shown in <span class="whole" data-v-b8e13602><!----><span class="figureNumber" data-v-b8e13602></span><!----></span> below.</p><figure data-v-82d3229c><!--[--><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> promise <span class="token operator">=</span> <span class="token function">getQuotient</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">quotient</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;The quotient is &quot;</span><span class="token operator">+</span>quotient<span class="token operator">+</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span>
	<span class="token comment">// This function does not return a value, so we can see it</span>
	<span class="token comment">// as the promise itself will be returned.</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// So here we immediately call .catch() on the same promise.</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--><figcaption data-v-82d3229c>Sample usage of an asynchronous function returning a promise.</figcaption><span class="incrementFigureNumber" data-v-82d3229c></span></figure><p>As you probably realise, we can even get rid of the <code>promise</code> variable and call <code>.then()</code> and <code>.catch()</code> on the promise directly, as shown in <span class="whole" data-v-b8e13602><!----><span class="figureNumber" data-v-b8e13602></span><!----></span> below.</p><figure data-v-82d3229c><!--[--><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">getQuotient</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">quotient</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;The quotient is &quot;</span><span class="token operator">+</span>quotient<span class="token operator">+</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--><figcaption data-v-82d3229c>Sample usage of an asynchronous function returning back a promise.</figcaption><span class="incrementFigureNumber" data-v-82d3229c></span></figure><p>This code will run asynchronously, and is looks really similar to what a synchronous version of the code would look like, which is shown in <span class="whole" data-v-b8e13602><!----><span class="figureNumber" data-v-b8e13602></span><!----></span>, which is really promising.</p><figure data-v-82d3229c><!--[--><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">try</span><span class="token punctuation">{</span>
	<span class="token keyword">const</span> quotient <span class="token operator">=</span> <span class="token function">getQuotient</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;The quotient is &quot;</span><span class="token operator">+</span>quotient<span class="token operator">+</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--><figcaption data-v-82d3229c>Sample usage of a synchronous function.</figcaption><span class="incrementFigureNumber" data-v-82d3229c></span></figure><p>The question is, how readable will the code be when we start using multiple promises? Will we get into a callback hell similar situation, as the one shown in <span class="whole" data-v-b8e13602><!----><span class="figureNumber" data-v-b8e13602></span><!----></span> below where we use asynchronous functions with callbacks?</p><figure data-v-82d3229c><!--[--><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// Asynchronous version with callback functions.</span>
<span class="token keyword">function</span> <span class="token function">loadUserWithPetsAndStoreInFile</span><span class="token punctuation">(</span><span class="token parameter">userId<span class="token punctuation">,</span> filename<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token function">getUserById</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">userError<span class="token punctuation">,</span> user</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>userError<span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token function">callback</span><span class="token punctuation">(</span>userError<span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
			<span class="token function">getPetsByOwnerName</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">petsError<span class="token punctuation">,</span> pets</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>petsError<span class="token punctuation">)</span><span class="token punctuation">{</span>
					<span class="token function">callback</span><span class="token punctuation">(</span>petsError<span class="token punctuation">)</span>
				<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
					<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
						pets
					<span class="token punctuation">}</span>
					fileSystem<span class="token punctuation">.</span><span class="token function">storeInJsonFile</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> filename<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">storeError<span class="token punctuation">,</span> fileSize</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
						<span class="token keyword">if</span><span class="token punctuation">(</span>storeError<span class="token punctuation">)</span><span class="token punctuation">{</span>
							<span class="token function">callback</span><span class="token punctuation">(</span>storeError<span class="token punctuation">)</span>
						<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
							<span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> fileSize<span class="token punctuation">)</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span><span class="token punctuation">)</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// Sample usage of the function.</span>
<span class="token function">loadUserWithPetsAndStoreInFile</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;data.json&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Data stored in file &quot;</span><span class="token operator">+</span>fileSize<span class="token operator">+</span><span class="token string">&quot; bytes big!&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--><figcaption data-v-82d3229c>Example of callback hell.</figcaption><span class="incrementFigureNumber" data-v-82d3229c></span></figure><p>No, list item 1 above (<em>our callback function passed to <code>.then()</code> can return back a new promise</em>) makes sure that we don&#39;t get into a callback hell situation. If the asynchronous functions in the <span class="whole" data-v-b8e13602><span class="decrementFigureNumber" data-v-b8e13602></span><span class="figureNumber" data-v-b8e13602></span><span class="incrementFigureNumber" data-v-b8e13602></span></span> above would return back promises instead of using callback functions, the code would look as shown in <span class="whole" data-v-b8e13602><!----><span class="figureNumber" data-v-b8e13602></span><!----></span> below.</p><figure data-v-82d3229c><!--[--><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// Asynchronous version with promises.</span>
<span class="token keyword">function</span> <span class="token function">loadUserWithPetsAndStoreInFile</span><span class="token punctuation">(</span><span class="token parameter">userId<span class="token punctuation">,</span> filename</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">getUserById</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token function">getPetsByOwnerName</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// We return back a new promise here...</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">pets</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// ...so here we call &quot;then&quot; on that new getPetsByOwnerName promise!</span>
		<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
			pets
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> fileSystem<span class="token punctuation">.</span><span class="token function">storeInJsonFile</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> filename<span class="token punctuation">)</span> <span class="token comment">// We return back a new promise here...</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fileSize</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// ...so here we call &quot;then&quot; on that new fileSystem promise!</span>
		
		<span class="token comment">// The value we return here is not a promise, so it will</span>
		<span class="token comment">// automatically be wrapped in a resolve promise.</span>
		<span class="token keyword">return</span> fileSize
		<span class="token comment">// This last promise can be seen as the final promise we</span>
		<span class="token comment">// return back from loadUserWithPetsAndStoreInFile().</span>
		
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// Sample usage of the function.</span>
<span class="token function">loadUserWithPetsAndStoreInFile</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;data.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fileSize</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Data stored in file &quot;</span><span class="token operator">+</span>fileSize<span class="token operator">+</span><span class="token string">&quot; bytes big!&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--><figcaption data-v-82d3229c>Sample usage of sequential calls to asynchronous functions returning back promises.</figcaption><span class="incrementFigureNumber" data-v-82d3229c></span></figure><p>An importing thing to know when using chained promises like we do here is that if one of the promises in the chain is rejected, the next promises in the chain will never be resolved, and the error will be passed to the callback functions passed to <code>.catch()</code> no matter which promise that was rejected. So in <span class="whole" data-v-b8e13602><span class="decrementFigureNumber" data-v-b8e13602></span><span class="figureNumber" data-v-b8e13602></span><span class="incrementFigureNumber" data-v-b8e13602></span></span> above, even if it looks like we only call <code>.catch()</code> on the last promise in the chain, the callback function we pass to it will be called when any promise in the chain is rejected.</p><p>This way of writing asynchronous code (with promises) is really similar to synchronous code, as shown in <span class="whole" data-v-b8e13602><!----><span class="figureNumber" data-v-b8e13602></span><!----></span> below.</p><figure data-v-82d3229c><!--[--><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// Synchronous version.</span>
<span class="token keyword">function</span> <span class="token function">loadUserWithPetsAndStoreInFile</span><span class="token punctuation">(</span><span class="token parameter">userId<span class="token punctuation">,</span> filename</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token function">getUserById</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span>
	<span class="token keyword">const</span> pets <span class="token operator">=</span> <span class="token function">getPetsByOwnerName</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
	<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
		pets
	<span class="token punctuation">}</span>
	<span class="token keyword">const</span> fileSize <span class="token operator">=</span> fileSystem<span class="token punctuation">.</span><span class="token function">storeInJsonFile</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> filename<span class="token punctuation">)</span>
	<span class="token keyword">return</span> fileSize
<span class="token punctuation">}</span>

<span class="token comment">// Sample usage of the function.</span>
<span class="token keyword">try</span><span class="token punctuation">{</span>
	<span class="token keyword">const</span> fileSize <span class="token operator">=</span> <span class="token function">loadUserWithPetsAndStoreInFile</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;data.json&quot;</span><span class="token punctuation">)</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Data stored in file &quot;</span><span class="token operator">+</span>fileSize<span class="token operator">+</span><span class="token string">&quot; bytes big!&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--><figcaption data-v-82d3229c>Sample usage of sequential calls to synchronous functions.</figcaption><span class="incrementFigureNumber" data-v-82d3229c></span></figure><p>The only downside with promises is that we need to pass callback functions to <code>.then()</code> and <code>.catch()</code>, which makes our code a little bit more indented and a little bit harder to read than the synchronous code, but that we can solve with <code>async</code> and <code>await</code>.</p><h2 id="async-and-await" tabindex="-1"><a class="header-anchor" href="#async-and-await" aria-hidden="true">#</a> Async and Await</h2><p>The keywords <code>async</code> and <code>await</code> can make our asynchronous code with promises even more readable. The <code>await</code> operator is the real hero of these two. Instead of calling <code>.then()</code> or <code>.catch()</code> on a promise, we can wait for the promise to be resolved or rejected with the <code>await</code> operator. When the promise resolve, the <code>await</code> operator will yield the value the promise resolved to, and when the promise is rejected the <code>await</code> operator will throw the error as an exception.</p><p>So, without <code>async</code> and <code>await</code>, we can call an asynchronous function returning a promise as shown in <span class="whole" data-v-b8e13602><!----><span class="figureNumber" data-v-b8e13602></span><!----></span> below.</p><figure data-v-82d3229c><!--[--><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// Asynchronous version with promises.</span>
<span class="token function">getQuotient</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">quotient</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;The quotient is &quot;</span><span class="token operator">+</span>quotient<span class="token operator">+</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--><figcaption data-v-82d3229c>Sample usage of an asynchronous function returning back a promise.</figcaption><span class="incrementFigureNumber" data-v-82d3229c></span></figure><p>If we would use the <code>await</code> operator, it would instead look as shown in <span class="whole" data-v-b8e13602><!----><span class="figureNumber" data-v-b8e13602></span><!----></span> below.</p><figure data-v-82d3229c><!--[--><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// Asynchronous version with promises and await.</span>
<span class="token keyword">try</span><span class="token punctuation">{</span>
	<span class="token keyword">const</span> quotient <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getQuotient</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;The quotient is &quot;</span><span class="token operator">+</span>quotient<span class="token operator">+</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--><figcaption data-v-82d3229c>Sample usage of an awaiting an promise returned back from a function.</figcaption><span class="incrementFigureNumber" data-v-82d3229c></span></figure><p>This code is just as readable as synchronous code, the only different is that whenever we call a function that returns a promise, we must remember to use the <code>await</code> operator to wait for the promise to be resolved or rejected.</p><p>Whenever you use the <code>await</code> operator in a function, you must mark that function with the <code>async</code> keyword. A function marked with the <code>async</code> keyword always returns back a promise that resolves to the value you <code>return</code> back from the function. An example of that is shown in <span class="whole" data-v-b8e13602><!----><span class="figureNumber" data-v-b8e13602></span><!----></span> below.</p><figure data-v-82d3229c><!--[--><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// Asynchronous version with promises and async/await.</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getTheSum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">const</span> quotient1 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getQuotient</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
	<span class="token keyword">const</span> quotient2 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getQuotient</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> quotient1 <span class="token operator">+</span> quotient12
	<span class="token comment">// The sum will be wrapped in a promise,</span>
	<span class="token comment">// since the `async` keyword is used on this function.</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">logTheSum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">try</span><span class="token punctuation">{</span>
		<span class="token keyword">const</span> theSum <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getTheSum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Couldn&#39;t log the sum because division by 0.&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// Even though this function does not explicitly return a value,</span>
	<span class="token comment">// a promise will be returned implicitly.</span>
<span class="token punctuation">}</span>

<span class="token function">logTheSum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Use the await operator here if you don&#39;t want the code</span>
<span class="token comment">// execution to continue until the promise has been fulfilled or rejects.</span>
<span class="token comment">// As it is now (without the await operator), Hello! will be logged first.</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello!&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--><figcaption data-v-82d3229c>Example of async functions.</figcaption><span class="incrementFigureNumber" data-v-82d3229c></span></figure><h2 id="how-to-create-promises" tabindex="-1"><a class="header-anchor" href="#how-to-create-promises" aria-hidden="true">#</a> How to Create Promises</h2><p>Often, promises are created automatically for you when you call one of the built-in functions in the JavaScript runtime environment that run asynchronously and returns a promise, such as:</p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API" target="_blank" rel="noopener noreferrer">fetch()<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><p>It&#39;s also possible to create your own promises using <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer">the Promise constructor<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>, as shown in <span class="whole" data-v-b8e13602><!----><span class="figureNumber" data-v-b8e13602></span><!----></span> below.</p><figure data-v-82d3229c><!--[--><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> myPromise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">// The work the promise should do should be written here.</span>
	<span class="token comment">// If all goes well, call resolve(), and pass it the computed value.</span>
	<span class="token comment">// If something goes wrong, call reject(), and pass it the error.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--><figcaption data-v-82d3229c>Template for creating your own promise.</figcaption><span class="incrementFigureNumber" data-v-82d3229c></span></figure><p>You need to pass a callback function to the Promise constructor. That callback function will be invoked immediately by the constructor, and in that function you should write the code for the long running operation. The constructor will also pass you two callback functions, one called <code>resolve()</code>, and one called <code>reject()</code>.</p><p>When your long running operation has completed, you should call <code>resolve()</code> and pass it the value the long running operation resulted in. If something goes wrong you should instead call <code>reject()</code>, and pass it the error.</p><p>To implement <code>getQuotient()</code> as an asynchronous function using promises, it would look as shown in <span class="whole" data-v-b8e13602><!----><span class="figureNumber" data-v-b8e13602></span><!----></span> below.</p><figure data-v-82d3229c><!--[--><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getQuotient</span><span class="token punctuation">(</span><span class="token parameter">dividend<span class="token punctuation">,</span> divisor</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>divisor <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&quot;Can&#39;t divide by 0&quot;</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
			<span class="token function">resolve</span><span class="token punctuation">(</span>dividend <span class="token operator">/</span> divisor<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// Or create the promise implicitly by using the async keyword:</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getQuotient</span><span class="token punctuation">(</span><span class="token parameter">dividend<span class="token punctuation">,</span> divisor</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>divisor <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">throw</span> <span class="token string">&quot;Can&#39;t divide by 0&quot;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> dividend <span class="token operator">/</span> divisor
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">try</span><span class="token punctuation">{</span>
	<span class="token keyword">const</span> quotient <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getQuotient</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;The quotient is &quot;</span><span class="token operator">+</span>quotient<span class="token operator">+</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--><figcaption data-v-82d3229c>A function returning a custom promise.</figcaption><span class="incrementFigureNumber" data-v-82d3229c></span></figure><p>You can use the promise above in the same way as any other promise, but since it doesn&#39;t contain any call to an asynchronous function (that runs in the background), it will run synchronous. To make it asynchronous, we could for example use <code>setTimeout()</code> to delay the computations, as shown in <span class="whole" data-v-b8e13602><!----><span class="figureNumber" data-v-b8e13602></span><!----></span> below.</p><figure data-v-82d3229c><!--[--><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getQuotient</span><span class="token punctuation">(</span><span class="token parameter">dividend<span class="token punctuation">,</span> divisor</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>divisor <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&quot;Can&#39;t divide by 0&quot;</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
				<span class="token function">resolve</span><span class="token punctuation">(</span>dividend <span class="token operator">/</span> divisor<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">try</span><span class="token punctuation">{</span>
	<span class="token keyword">const</span> quotient <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getQuotient</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;The quotient is &quot;</span><span class="token operator">+</span>quotient<span class="token operator">+</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--><figcaption data-v-82d3229c>A function returning a custom promise that runs (waits) in the background.</figcaption><span class="incrementFigureNumber" data-v-82d3229c></span></figure><p>Note that when you implement functions that makes use of promises from scratch, the implementation can have a few symptoms of callback hell, as <code>getQuotient()</code> above. The real benefit with promises is that the code is really easy to read when you call functions returning promises, as in the try/catch block above.</p><h2 id="recommended-reading" tabindex="-1"><a class="header-anchor" href="#recommended-reading" aria-hidden="true">#</a> Recommended Reading</h2><ul><li>The following chapters from the book <a href="https://eloquentjavascript.net/" target="_blank" rel="noopener noreferrer">Eloquent JavaScript<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>: <ul><li><ol start="11"><li>Asynchronous Programming</li></ol></li></ul></li></ul></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/PeppeL-G/course-material/edit/master/src/lectures/asynchronous-programming-in-js/README.md" rel="noopener noreferrer" target="_blank" aria-label="Improve this page!"><!--[--><!--]--> Improve this page! <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/course-material/assets/app-8331cbf7.js" defer></script>
  </body>
</html>
